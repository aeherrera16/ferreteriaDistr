<h2>Consultar artículo</h2>
<form method="post" action="/articulos/consultar" id="form-consultar">
  <label for="tipo-busqueda">Buscar por:</label>
  <select id="tipo-busqueda" name="tipoBusqueda">
    <option value="codigo">Código</option>
    <option value="nombre">Nombre</option>
  </select>
  <span id="input-codigo">
    <label>Código <input name="codigo" autocomplete="off" /></label>
  </span>
  <span id="input-nombre" style="display: none">
    <label>Nombre <input name="nombre" autocomplete="off" /></label>
  </span>
  <button>Buscar</button>
</form>
<script>
  const tipoBusqueda = document.getElementById("tipo-busqueda");
  const inputCodigo = document.getElementById("input-codigo");
  const inputNombre = document.getElementById("input-nombre");
  tipoBusqueda.addEventListener("change", function () {
    if (this.value === "codigo") {
      inputCodigo.style.display = "";
      inputNombre.style.display = "none";
    } else {
      inputCodigo.style.display = "none";
      inputNombre.style.display = "";
    }
  });
  // Limpiar el otro campo al enviar
  document
    .getElementById("form-consultar")
    .addEventListener("submit", function (e) {
      if (tipoBusqueda.value === "codigo") {
        inputNombre.querySelector("input").value = "";
      } else {
        inputCodigo.querySelector("input").value = "";
      }
    });
</script>
<% if (error) { %>
<p style="color: red"><%= error %></p>
<% } %> <% if (articulo) { %>
<h3>Resultado</h3>
<pre><%= JSON.stringify(articulo, null, 2) %></pre>
<% if (articulo.Stock < articulo.StockMinimo) { %>
<p style="color: orange">⚠ Stock bajo el mínimo</p>
<% } %> <% } %>
